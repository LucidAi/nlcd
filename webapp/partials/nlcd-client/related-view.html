<div class="row">
<div class="col-md-12">
  <!-- <h3 class="text-uppercase" style="font-weight:normal;">related documents</h3> -->


    <!-- Related Tabs -->
    <ul id="relatedTabs" class="nav nav-tabs" role="tablist">

      <li style="cursor:pointer;" class="active tip-tooltip" data-toggle="tooltip" title="View all related documents">
        <a role="tab" data-toggle="tab" class="text-uppercase" data-target="#relatedTabAll">articles {{related.length}}</a>
      </li>

      <li style="cursor:pointer;" data-toggle="tooltip" class="tip-tooltip" title="Filter related by text query">
        <a role="tab" data-toggle="tab" class="text-uppercase" data-target="#relatedTabFilter">search</a>
      </li>

      <li style="cursor:pointer;" data-toggle="tooltip" class="tip-tooltip" title="View only cited">
        <a role="tab" data-toggle="tab" class="text-uppercase" data-target="#relatedTabCit">cit.</a>
      </li>


      <li style="cursor:pointer;" data-toggle="tooltip" class="tip-tooltip" title="View related authors">
        <a role="tab" data-toggle="tab" class="text-uppercase" data-target="#relatedTabAuthors">authors</a>
      </li>

      <li style="cursor:pointer;" data-toggle="tooltip" class="tip-tooltip" title="View related sources">
        <a role="tab" data-toggle="tab" class="text-uppercase" data-target="#relatedTabSources">src.</a>
      </li>

      <li style="cursor:pointer;" data-toggle="tooltip" class="tip-tooltip" title="Select documents by dates">
        <a role="tab" data-toggle="tab" class="text-uppercase" data-target="#relatedTabDates">dates</a>
      </li>

    </ul>
    <!-- END:Related Tabs -->

    <br/>

    <!-- Related panes -->
    <div class="tab-content" id="relatedTabsContainer">

      <!-- PANE:ALL -->
      <div class="tab-pane fade in active" id="relatedTabAll">

        <table class="table table-condensed table-striped table-bordered">
          <thead>
            <tr>

              <td class="text-muted text-uppercase">
                <a ng-click="RelatedAllTabOrderBy('inSelection');">
                  by selection
                  <span ng-show="display.relatedTabAllPredicate=='inSelection'">
                    <span class="glyphicon glyphicon-chevron-down" ng-show="display.relatedTabAllReversed"></span>
                    <span class="glyphicon glyphicon-chevron-up" ng-show="!display.relatedTabAllReversed"></span>
                  </span>
                </a>
              </td>

              <td class="text-muted text-uppercase" style="width:60px;">
                <a ng-click="RelatedAllTabOrderBy('referenceCount');">
                  ref
                  <span ng-show="display.relatedTabAllPredicate=='referenceCount'">
                    <span class="glyphicon glyphicon-chevron-down" ng-show="display.relatedTabAllReversed"></span>
                    <span class="glyphicon glyphicon-chevron-up" ng-show="!display.relatedTabAllReversed"></span>
                  </span>
                </a>
              </td>

              <td class="text-muted text-uppercase" style="width:60px;">
                <a ng-click="RelatedAllTabOrderBy('shareCount');">
                  shr
                  <span ng-show="display.relatedTabAllPredicate=='shareCount'">
                    <span class="glyphicon glyphicon-chevron-down" ng-show="display.relatedTabAllReversed"></span>
                    <span class="glyphicon glyphicon-chevron-up" ng-show="!display.relatedTabAllReversed"></span>
                  </span>
                </a>
              </td>

              <td class="text-muted text-uppercase" style="width:60px;">
                <a ng-click="RelatedAllTabOrderBy('pubDate');">
                  pub
                  <span ng-show="display.relatedTabAllPredicate=='pubDate'">
                    <span class="glyphicon glyphicon-chevron-down" ng-show="display.relatedTabAllReversed"></span>
                    <span class="glyphicon glyphicon-chevron-up" ng-show="!display.relatedTabAllReversed"></span>
                  </span>
                </a>
              </td>

            </tr>
          </thead>

          <tbody>
            <tr ng-repeat="node in related | orderBy : display.relatedTabAllPredicate : display.relatedTabAllReversed"
                ng-class="{danger: node.inSelection}">
              <td>
                <span class="glyphicon glyphicon-star" ng-show="node.refId==central.refId"></span>
                <a href="{{node.url}}"
                   class="tip-popover"
                   data-toggle="popover"
                   title="{{node.title}}"
                   data-content="{{toolPopoverContent(node)}}"
                >
                
                
                                      
                  {{node.title|cut:true:40:' ...'}}
                </a>
                <!-- <a style="cursor:pointer;">focus</a> -->
                <!-- <a style="cursor:pointer;" class="glyphicon glyphicon-info-sign"></a> -->
              </td>
              <td>
                {{node.referenceCount}}
              </td>
              <td>
                {{node.shareCount}}
              </td>
              <td>
                <span ng-show="node.pubDate == null">n/a</span>
                <span ng-show="node.pubDate != null">{{node.pubDate}}</span>
              </td>
            </tr>
          </tbody>
        </table>


      </div>
      <!-- END:ALL -->


      <!-- PANE:FILTER -->
      <div class="tab-pane fade" id="relatedTabFilter">
      </div>
      <!-- END:FILTER -->


      <!-- PANE:CIT -->
      <div class="tab-pane fade" id="relatedTabCit">
        <div>
          <p class="lead">
            Sorry! This tab is not implemented yet :-(<br/>
            Our robots are working hard to finish this soon! Please comeback later.
          </p>
        </div>
      </div>
      <!-- END:CIT -->


      <!-- PANE:AUTHORS -->
      <div class="tab-pane fade" id="relatedTabAuthors">
        <table class="table table-condensed table-striped  table-bordered">
          <thead>
            <tr>
              <td></td>
              <td>ref</td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="author in meta.authors">
              <td>
                {{author.name.toTitleCase()}}
              </td>
              <td>
                {{author.referenceCount}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- END:AUTHORS -->


      <!-- PANE:SOURCES -->
      <div class="tab-pane fade" id="relatedTabSources">
        <table class="table table-condensed table-striped  table-bordered">
          <thead>
            <tr>
              <td></td>
              <td>ref</td>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="source in meta.sources">
              <td>
                {{source.name}}
              </td>
              <td>
                {{source.referenceCount}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- END:SOURCES -->


      <!-- PANE:DATES -->
      <div class="tab-pane fade" id="relatedTabDates">
        



        <table class="table table-condensed table-striped table-bordered">
          <thead>
            <tr>

              <td class="text-muted text-uppercase">
                <a ng-click="RelatedDatesTabOrderBy('date');">
                  date
                  <span ng-show="display.relatedTabDatesPredicate=='date'">
                    <span class="glyphicon glyphicon-chevron-down" ng-show="display.relatedTabDatesReversed"></span>
                    <span class="glyphicon glyphicon-chevron-up" ng-show="!display.relatedTabDatesReversed"></span>
                  </span>
                </a>
              </td>

              <td class="text-muted text-uppercase" style="width:200px;">
                <a ng-click="RelatedDatesTabOrderBy('documentsCount');">
                  documents
                  <span ng-show="display.relatedTabDatesPredicate=='documentsCount'">
                    <span class="glyphicon glyphicon-chevron-down" ng-show="display.relatedTabDatesReversed"></span>
                    <span class="glyphicon glyphicon-chevron-up" ng-show="!display.relatedTabDatesReversed"></span>
                  </span>
                </a>
              </td>
              
              <td  style="width:68px;">
              </td>

            </tr>
          </thead>

          <tbody>
            <tr ng-repeat="dateEntry in dateDistr | orderBy : display.relatedTabDatesPredicate : display.relatedTabDatesReversed">

              <td>{{dateEntry.date}}</td>

              <td>{{dateEntry.documentsCount}}</td>
              
              <td>

                <button type="button"
                        class="btn btn-default btn-xs"
                        ng-show="!dateEntry.selected"
                        ng-click="SelectDate(dateEntry)"
                        >select</button>

                <button type="button"
                        class="btn btn-danger btn-xs"
                        ng-show="dateEntry.selected"
                        ng-click="SelectDate(dateEntry)"
                        >deselect</button>

              </td>

            </tr>
          </tbody>
        </table>






        
      </div>
      <!-- END:DATES -->

  </div>
</div>
</div>
